{% extends "base.html" %} {% load i18n %} {% load l10n %}{% load bootstrap_tags %} {% block body_outer %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_nbs_ca/css/bootstrap-duallistbox.min.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_nbs_ca/css/waterproof_nbs_ca.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_treatment_plants/css/treatment_plants.css" />
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<div class="page-header">
    <h1>{% trans "Edit Treatment Plant" %}</h1>
    <h1 class="title-city">{{country.nameCity}}</h1>
</div>
<form data-toggle="validator" role="form" action="#">
    <h4 class="text-primary">{% trans "General Settings" %}</h4>
    <div class="form-group">
        <label>{% trans "Name" %} <span class="text-danger-wp">(*)</span> </label>
        <input type="text" class="form-control" id="idNamePlant" data-error="This field is required" placeholder="Enter name" required>
        <div class="help-block with-errors"></div>
    </div>
    <div class="form-group">
        <label>{% trans "Description" %} <span class="text-danger-wp">(*)</span> </label>
        <textarea id="idDescriptionPlant" class="form-control" placeholder="Enter description" data-error="This field is required"
            rows="4" required></textarea>
        <div class="help-block with-errors"></div>
    </div>

    <div class="form-group">
        <fieldset>
        <legend><label>{% trans "Water Intake" %} <span class="text-danger-wp">(*)</span> </label></legend>
            <label>{% trans "Select from the list wather intakes that arrive at your treatment plant and click on the button 'Add wather intake'" %}</label>
            <select  id="idIntakePlant" class="form-control" data-error="This field is required" required>
                <option></option>
                {% for intakePlants in intakeList %}
                    <option value="{{intakePlants.id}}" namelist="{{intakePlants.name}}" intake="{{intakePlants.nameIntake}}" csinfra="{{intakePlants.csinfra}}" data-value="{{intakePlants.id}}">{{intakePlants.nameIntake}}</option>
                {% endfor %}
            </select>
            <br>
            <table class="table table-striped table-bordered table-condensed" style="width:100%">
                <thead>
                    <tr class="info">
                        <th scope="col" class="small text-center vat">{% trans "Nombre" %}</th>
                        <th scope="col" class="small text-center vat">{% trans "Nombre de la fuente hídrica" %}</th>
                        <th scope="col" class="small text-center vat">{% trans "Infraestructura de la planta de tratamiento" %}</th>
                        <th scope="col" class="small text-center vat">{% trans "Options" %}</th>
                    </tr>
                </thead>
                <tbody id="idTbodyIntake">
                </tbody>
            </table>
            <div class="help-block with-errors"></div>
            <button type="button" class="btn btn-primary" id="idSendIntake">{% trans "Add wather intake" %}</button>
        </fieldset>
    </div>

    <div class="form-group">
        <fieldset>
            <legend><label>{% trans "Configuration" %} <span class="text-danger-wp">(*)</span> </label></legend>
            <label>{% trans "This is the plant configuration according tothe water quality of its water intakes. You can mark the elements of your treatment plant that correspond" %}</label>
            <div class="container-graph">
                <div class="container-config">
                    <div class="div-scroll">
                        <div class="arrow-right positon-arrow position-arrow-two">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-one">
                            <div class="line-right-one"></div>
                            <div class="point-right-one"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-four-one">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-four">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-five">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-six">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-six-one">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-six-two">
                            <div class="line-right-four"></div>
                            <div class="point-right-four"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-two-seven">
                            <div class="line-right-seven"></div>
                            <div class="point-right-seven"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-three">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-four">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-five">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-six">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-six-left">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-seven">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-eight">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-seven-one">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="arrow-right positon-arrow position-arrow-eight-one">
                            <div class="line-right"></div>
                            <div class="point-right"></div>
                        </div>
                        <div class="container-element container-element-two">
                            <div class="img-container-two img-color-container" id="black1" graphId="2" nameElement="Mezcla rápida" plantElement="MEZCLARAPIDA" onclick="viewTree(this)"></div>
                            <div class="text-container">Mezcla rápida</div>
                            <div class="container-change-state" onclick="changeStatus(1)"><div class="change-state" id="id1"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="2" model="A,B,C,D,E" id="id11d"  idr="id1"></div>
                        </div>
                        <div class="container-element container-element-two-top">
                            <div class="img-container img-color-container" id="black2" graphId="0" nameElement="Dosificación" plantElement="DOSIFICACION" onclick="viewTree(this)"></div>
                            <div class="text-container">Dosificación</div>
                            <div class="container-change-state" onclick="changeStatus(2)"><div class="change-state" id="id2"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="0" model="A,B,C,D,E" id="id21d"  idr="id2"></div>
                        </div>
                        <div class="container-element container-element-three">
                            <div class="img-container-three img-color-container" id="black3" graphId="3" nameElement="Mezcla lenta" plantElement="MEZCLALENTA" onclick="viewTree(this)"></div>
                            <div class="text-container">Mezcla lenta</div>
                            <div class="container-change-state" onclick="changeStatus(3)"><div class="change-state" id="id3"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="3" model="A,B,C,D,E" id="id31d"  idr="id3"></div>
                        </div>
                        <div class="container-element container-element-four">
                            <div class="img-container-four img-color-container" id="black4" graphId="4" nameElement="Sedimentación" plantElement="SEDIMENTACION" onclick="viewTree(this)"></div>
                            <div class="text-container">Sedimentación</div>
                            <div class="container-change-state" onclick="changeStatus(4)"><div class="change-state" id="id4"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="4" model="A,B,C,D,E" id="id41d"  idr="id4"></div>
                        </div>
                        <div class="container-element container-element-five">
                            <div class="img-container-five img-color-container" id="black5" graphId="5" nameElement="Filtración" plantElement="FILTRACIONRAPIDACONLECHOMIXTO" onclick="viewTree(this)"></div>
                            <div class="text-container">Filtración</div>
                            <div class="container-change-state" onclick="changeStatus(5)"><div class="change-state" id="id5"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="5" model="A,B,C,D,E,F" id="id51d"  idr="id5"></div>
                        </div>
                        <div class="container-element container-element-six">
                            <div class="img-container-six img-color-container" id="black6" graphId="7" nameElement="Filtración por membranas tamaño de particula retenida 0.01 μm" plantElement="FILTRACIONPORMEMBRANANIVEL2" onclick="viewTree(this)"></div>
                            <div class="container-change-state" onclick="changeStatus(6)"><div class="change-state" id="id6"></div></div>
                            <div class="text-container-one">Filtración por membranas tamaño de particula retenida 0.01 μm</div>
                            <div class="opacity-graph" name="disableElement"  graphId="7" model="" id="id61d"  idr="id6"></div>
                        </div>
                        <div class="container-element container-element-six-left">
                            <div class="img-container-seven img-color-container" id="black7" graphId="6" nameElement="Filtración por membranas tamaño de particula retenida 0.1 μm" plantElement="FILTRACIONPORMEMBRANANIVEL1" onclick="viewTree(this)"></div>
                            <div class="container-change-state" onclick="changeStatus(7)"><div class="change-state" id="id7"></div></div>
                            <div class="text-container-one">Filtración por membranas tamaño de particula retenida 0.1 μm</div>
                            <div class="opacity-graph" name="disableElement"  graphId="6" model="A,B,E" id="id71d"  idr="id7"></div>
                        </div>
                        <div class="container-element container-element-seven">
                            <div class="img-container-nine img-color-container" id="black8" graphId="8" nameElement="Filtración por membranas tamaño de particula retenida 0.001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL3" onclick="viewTree(this)"></div>
                            <div class="container-change-state" onclick="changeStatus(8)"><div class="change-state" id="id8"></div></div>
                            <div class="text-container-one">Filtración por membranas tamaño de particula retenida 0.001 μm</div>
                            <div class="opacity-graph" name="disableElement"  graphId="8" model="" id="id81d"  idr="id8"></div>
                        </div>
                        <div class="container-element container-element-seven-one">
                            <div class="img-container-nine-one img-color-container" id="black9" graphId="9" nameElement="Filtración por membranas tamaño de particula retenida 0.0001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL4" onclick="viewTree(this)"></div>
                            <div class="container-change-state" onclick="changeStatus(9)"><div class="change-state" id="id9"></div></div>
                            <div class="text-container-one">Filtración por membranas tamaño de particula retenida 0.0001 μm</div>
                            <div class="opacity-graph" name="disableElement"  graphId="9" model="A" id="id91d"  idr="id9"></div>
                        </div>
                        <div class="container-element container-element-seven-bottom">
                            <div class="img-container-eight img-color-container" id="black10" graphId="0" nameElement="Tratamiento de lodos" plantElement="TRATAMIENTODELODOS" onclick="viewTree(this)"></div>
                            <div class="text-container">Tratamiento de lodos</div>
                            <div class="container-change-state" onclick="changeStatus(10)"><div class="change-state" id="id10"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="0" model="A,B,C,D,E,F" id="id101d"  idr="id10"></div>
                        </div>
                        <div class="container-element container-element-eight">
                            <div class="img-container-ten img-color-container" id="black11" graphId="10" nameElement="Intercambio iónico" plantElement="INTERCAMBIOIONICO" onclick="viewTree(this)"></div>
                            <div class="text-container">Intercambio iónico</div>
                            <div class="container-change-state" onclick="changeStatus(11)"><div class="change-state" id="id11"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="10" model="B,C" id="id111d"  idr="id11"></div>
                        </div>
                        <div class="container-element container-element-eight-one">
                            <div class="img-container-ten-one img-color-container" id="black12" graphId="11" nameElement="Desinfección" plantElement="DESINFECCION" onclick="viewTree(this)"></div>
                            <div class="text-container">Desinfección</div>
                            <div class="container-change-state" onclick="changeStatus(12)"><div class="change-state" id="id12"></div></div>
                            <div class="opacity-graph" name="disableElement"  graphId="11" model="A,B,C,D,E,F,G" id="id121d"  idr="id12"></div>
                        </div>
                    </div>
                </div>
                <div id="idBackgroundGraph" class="container-background"></div>    
            </div>
        </fieldset>
    </div>
    <div class="container-var" id="idContainerVar">
        <div>
            <div class="input-var">
                <div class="form-group">
                    <label>{% trans "% Transported Water" %}</label>
                    <input class="form-control" id="idTransportedWater" value="100" readonly>
                    <div class="help-block with-errors"></div>
                </div>
            </div>
            <div class="input-var">
                <div class="form-group">
                    <label>{% trans "% Sediments Retained" %}</label>
                    <input step="0.0001" type="number" class="form-control" onblur="changeRetained(this)" id="idSedimentsRetained" placeholder="Enter Ssediments retained" >
                    <div class="help-block with-errors"></div>
                </div>
            </div>
        </div>
        <div>
            <div class="input-var">
                <div class="form-group">
                    <label>{% trans "% Nitrogen Retained" %}</label>
                    <input step="0.0001" type="number" class="form-control" onblur="changeRetained(this)" id="idNitrogenRetained" placeholder="Enter nitrogen retained">
                    <div class="help-block with-errors"></div>
                </div>
            </div>
            <div class="input-var">
                <div class="form-group">
                    <label>{% trans "% Phosphorus Retained" %}</label>
                    <input step="0.0001" type="number" class="form-control" onblur="changeRetained(this)" id="idPhosphorusRetained" placeholder="Enter phosphorus retained">
                    <div class="help-block with-errors"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="main-tree-content">
        <div>
            <div class="main-point" onclick="viewBranch('mainTree', this)">-</div>
            <div class="text-point-main" id="branch1">Treatment Plant</div>
        </div>
        <div class="margin-main" id="mainTree" style="visibility: hidden"></div>
    </div>
    <button type="button" id="submit" class="btn btn-primary ">{% trans "Submit" %}</button>
</form>
<script>
    var countriesLayerUrl = '{{ STATIC_URL }}waterproof_nbs_ca/data/countries.geojson';
    var userCountryId='{{country.id}}';
    var userCountryCode='{{country.codeCountry}}';
    var userCountryName='{{country.nameCountry}}';
</script>
{% endblock body_outer %} {% block extra_script %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.css" />
<script src="{{ STATIC_URL }}geonode/js/jszip/jszip.min.js"></script>
<script src="{{ STATIC_URL }}geonode/js/shp/shp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"
    integrity="sha512-dTu0vJs5ndrd3kPwnYixvOCsvef5SGYW/zSSK4bcjRBcZHzqThq7pt7PmCv55yb8iBvni0TSeIDV8RYKjZL36A=="
    crossorigin="anonymous"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/leaflet.ajax.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}waterproof_treatment_plants/js/waterproof_list_treatment_plants.js"></script>
<script src="https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.min.js"></script>
{% endblock %}