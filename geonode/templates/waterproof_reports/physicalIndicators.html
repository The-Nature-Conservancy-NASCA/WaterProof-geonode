{% extends "menu.html" %} 
{% load i18n %}
{% load static from staticfiles %}
{% load bootstrap_tags %} 
{% block extra_head %}

<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_nbs_ca/css/dataTables.bootstrap.min.css"/>
<link href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="{{ STATIC_URL }}lib/css/leaflet.css"/>
<link rel="stylesheet" href="{% static "geonode/css/leaflet/leaflet.defaultextent.css" %}">
<link rel="stylesheet" href="{{ STATIC_URL }}geonode/css/leaflet/Control.Coordinates.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}geonode/css/leaflet/Control.Loader.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}waterproof_intake/css/intake.css" />
<!--link rel="stylesheet" href="{{ STATIC_URL }}waterproof_reports/css/reports.css" /-->

{% endblock %} {% block body_outer %}
<!--header-->
<script type="text/javascript">
    var SelectedCurrency = "{{SelectedCurrency}}";
</script>
<div class="header-waterproof">   
    <div class="page-header">
        <h1>{% trans "Physical Indicators" %}</h1>
    </div>
    <!--div id="FilterPhisicalIndicators"></div-->
    <br>
    <!--Begin Form-->
    <div style="position: absolute; border: 1px; border-style: solid; margin-bottom: 10px; height: 8%; width: 80%; border-color: #1389AA;">
        <div class="help-in-report col-md-7" style="border-color: transparent; padding-top: 1%;">
            {% trans "This report summarizes the proportions in investment and benefits that will be achieved by the implementation of the SbN:" %}
        </div>
        <div class="col-md-5" style="text-align: center;position: absolute;top: 0px;right: 0px;margin-left: 65%;font-size: 13px;">
            <div style="float: left;width: 15%;">
                <img src="/static/geonode/img/Indicadores-financieros.png" style="height: 60%; width: 60%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;" title="{% trans "Financial indicators" %}"/> 
                <br> 
                <!--a>{% trans "Financial indicators" %}</a-->
                <a href="../../reports/financial/">{% trans "Financial indicators" %}</a>
            </div>
            <div style="float: left;width: 15%;" id="idFinancialIndicators">
                <img src="/static/geonode/img/indicadores-fisicos.png" style="height: 60%; width: 60%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black; opacity: 30%;" title="{% trans "Physical indicators" %}"/> 
                <br> 
                <a>{% trans "Physical indicators" %}</a>
                <!--a href="../../reports/physical/">{% trans "Physical indicators" %}</a-->
            </div>
            <div style="float: left;width: 15%;" id="idDecisionIndicators">
                <img src="/static/geonode/img/indicadores-decision.png" style="height: 60%; width: 60%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;" title="{% trans "Decision indicators" %}"/>
                <br>
                <a href="../../reports/decision/">{% trans "Decision indicators" %}</a>
            </div>
            <div style="float: left;width: 15%;" id="idGeographicIndicators">
                <img src="/static/geonode/img/indicadores-geograficos.png" style="height: 60%; width: 60%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;" title="{% trans "Geographic visualization" %}"/>
                <br>
                <!--a>{% trans "Geographic visualization" %}</a-->
                <a href="../../reports/geographic/">{% trans "Geographic visualization" %}</a>
            </div>
        </div>
        <div style="text-align: center;position: absolute;top: 10%;right: 0px;margin-left: 75%;font-size: 13px;">
            <img src="/static/geonode/img/reportes-icon.png" style="height: 30%; width: 30%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;" title="{% trans "Reports" %}"/>
            <br>
            <a id="Return"></a>
        </div>
    </div>
    <div style="padding-top: 10%;">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="overview-tab" data-toggle="tab" href="#Physical" role="tab" aria-controls="home" aria-selected="true">
                    {% trans "Physical idicators (INVEST)" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="how-tab" data-toggle="tab" href="#CPhysical" role="tab" aria-controls="profile" aria-selected="false">
                    {% trans "CPhysical and risk indicators" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#Interventtions" role="tab" aria-controls="contact" aria-selected="false">
                    {% trans "Interventtions results" %}
                </a>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active in" id="Physical" role="tabpanel" aria-labelledby="overview-tab">
                <!--Table Element of the water intake system-->
                <div style=" align-items: center;">
                    <h5>{% trans "Water intake" %}
                        <select name="select" id="selectIntake">
                            <option selected disabled>{% trans "Select a Intake" %}</option>
                            {% for Option in NamesIndicators %}
                            <option value={{Option}} >{{Option}}</option>
                            {% endfor %}
                            </select>
                    </h5>
                </div>
                <div style="text-align: center;">
                    <div style="width: 50%; float: left;">
                        <img src="/static/geonode/img/indicadores-fisicos.png" style="height: 70%; width: 70%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;"/>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="row">
                            <div class="col-lg-12">
                                <div id="container"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <br>
                <!--Table-->
                <div style="clear:both;" class="table-responsive">
                    <table id="example" class="table table-striped table-bordered table-condensed" style=" width:100%">
                        <thead>
                            <tr class="info">
                                <th scope="col" class="small text-center vat" style="display: none;">{% trans "Indicator" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Year" %}</th>
                                <th scope="col" class="small text-center vat px-5">{% trans "Change in volume of water yield (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in base flow(%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in total sediments (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in nitrogen load (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in phosphorus Load (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in carbon storage" %}</th>
                                <th scope="col" class="small text-center vat" style="display: none;">{% trans "Date" %}</th>
                                <th scope="col" class="small text-center vat" style="display: none;">{% trans "Name" %}</th>
                            </tr>
                        </thead>
                        <tbody id="FilterPhisicalIndicators">
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="CPhysical" role="tabpanel" aria-labelledby="how-tab">
                
            </div>
            <div class="tab-pane fade" id="Interventtions" role="tabpanel" aria-labelledby="contact-tab">
                
            </div>
        </div>
        <div>
            <br>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="color: white; background-color: #6398C1;">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock %} {% block extra_script %}
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/highcharts.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/exporting.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/export-data.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/accessibility.js"></script>

<script src="{{ STATIC_URL }}geonode/js/datatables/jquery.dataTables.min.js"></script>
<script src="{{ STATIC_URL }}geonode/js/datatables/dataTables.bootstrap.min.js"></script>

<script type="text/javascript" src="{% url 'javascript-catalog-intake' %}"></script>
<script src="{{ STATIC_URL }}waterproof_intake/js/jquery.smartWizard.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Leaflet.Editable.js"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Leaflet.Coordinates.js"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Control.Loader.js"></script>

<!--ZIP reader library-->
<script src="{{ STATIC_URL }}geonode/js/jszip/jszip.min.js"></script>
<!--Shapefile reader library -->
<script src="{{ STATIC_URL }}geonode/js/shp/shp.min.js"></script>
<script src="{{ STATIC_URL }}geonode/js/proj4js/proj4.js"></script>
<script type="text/javascript">
    var mxBasePath = '{{ STATIC_URL }}geonode/js/mxgraph/src';
    var mxImageBasePath = '{{ STATIC_URL }}geonode/js/mxgraph/examples/images';
    var editorUrl = '{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/config/diagrameditor.xml';
    var serverApi = '{{serverApi}}';
    var lang = '{{LANGUAGE_CODE}}';
    let waterproof = {};
    OSM_BASEMAP_URL = '{{ OSM_BASEMAP_URL }} ';
    IMG_BASEMAP_URL = '{{ IMG_BASEMAP_URL }} ';
    HYDRO_BASEMAP_URL = '{{ HYDRO_BASEMAP_URL }} ';
    GRAY_BASEMAP_URL = '{{ GRAY_BASEMAP_URL }} ';
    GEOSERVER_WMS = '{{ GEOSERVER_WMS }}';
    HYDRO_NETWORK_LYR = '{{ HYDRO_NETWORK_LYR }}';
</script>
<script src="{{ STATIC_URL }}waterproof_reports/js/physicalIndicators.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/mxClient.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/js/app.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/js/app.js"></script>
<script src="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script type="text/javascript">

var localStorageId = localStorage.idStudyCase;
    $('#Return').append(
        `
        <a href="../../study_cases/report/${localStorageId}">{% trans "Return" %}</a>
            
        `
    );

    $('#FilterPhisicalIndicators').append(
        `
        {% for investIndicators in Indicators %}
            <tr id="filas">
                <td class="small text-center vat" style="display: none;">{{investIndicators.intake.name}}</td>
                <td class="small text-center vat" id="valor">{{investIndicators.time}}</td>
                <td class="small text-center vat truncate" id="valor1">{{investIndicators.awy}}</td>
                <td class="small text-center vat" id="valor2">{{investIndicators.bf_m3}}</td>
                <!--td>{{intake.max_benefit_req_time}}</td-->
                <td class="small text-center vat" id="valor3">{{investIndicators.wsed_ton}}</td>
                <td class="small text-center vat" id="valor4">{{investIndicators.wn_kg}}</td>
                <td class="small text-center vat" id="valor5">{{investIndicators.wp_kg}}</td>
                <td class="small text-center vat" id="valor6">{{investIndicators.wc_ton}}</td>
                <td class="small text-center vat" style="display: none;">{{investIndicators.date}}</td>
                <td class="small text-center vat" style="display: none;">{{investIndicators.intake.city.name}}</td>
            </tr>
        {% endfor %}
        `
    );

    /*function Filter(){
        
    }*/

    //localStorage.idStudyCase
    var e = document.getElementById("selectIntake");
    console.log("este es el valor de e  :"+e)
    var table = $('#example').DataTable({
        "order": [ [ 1, "desc" ], [ 7, "desc" ], [ 0, "asc" ]],
        'dom': 'lrtip'
    });
    table.search("is simply dummy text of the printing and t").draw();
    console.log(table.rows())
    function show(){
       // a=document.querySelectorAll('#valor1').innerHTML
        table.search(e.value).draw();
        console.log(e.value)

        var value_awy = document.getElementById("valor1").innerText;
        var value_bf_m3 = document.getElementById("valor2").innerText;
        var value_wsed_ton = document.getElementById("valor3").innerText;
        var value_wn_kg = document.getElementById("valor4").innerText;
        var value_wp_kg = document.getElementById("valor5").innerText;
        var value_wc_ton = document.getElementById("valor6").innerText;

        console.log("valor filtro es "+value_awy)

        //console.log(a);

        Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: e.value_awy
            },
            xAxis: {
                categories: ['{% trans "Change in volume of water yield (%)" %}', '{% trans "Change in base flow(%)" %}', '{% trans "Change in total sediments (%)" %}', '{% trans "Change in nitrogen load (%)" %}', '{% trans "Change in phosphorus Load (%)" %}', '{% trans "Change in carbon storage" %}']
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Intake',
                data: [parseFloat(value_awy), parseFloat(value_bf_m3), parseFloat(value_wsed_ton), parseFloat(value_wn_kg), parseFloat(value_wp_kg), parseFloat(value_wc_ton)]
            }]
        });

    }
    e.onchange=show;
    
    
</script>
{% endblock %}